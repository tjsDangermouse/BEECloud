/* Minimal shared styles extracted from templates */

/* Global base and mobile behavior */
html, body {
  background-color: #111827;
  background: #1a1a1a;
  color: white;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  /* Prevent overscroll bounce effect on mobile */
  overscroll-behavior: none;
  overscroll-behavior-y: none;
  -webkit-overflow-scrolling: touch;
  /* Ensure full height background */
  min-height: 100vh;
  height: 100%;
}

/* Apply fixed positioning only on touch devices (mobile) */
@media (pointer: coarse) {
  html, body {
    position: fixed;
    width: 100%;
    height: 100%;
  }
}

/* Prevent overscroll on all elements */
*, *::before, *::after {
  overscroll-behavior: none;
  overscroll-behavior-y: none;
}

/* iOS Safe Area Support for Full Screen Mode */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-top: max(0px, env(safe-area-inset-top));
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
}

:root {
  --page-bg: #2d2e2d;
  --panel-bg: #1f2937;        /* Desktop panel background */
  --panel-bg-mobile: #393938; /* Mobile card/panel background */
  --overlay-bg: rgba(57, 57, 56, 0.9);
  --desktop-bg: #111827;      /* Desktop overall background */
  --sidebar-bg: #2d3748;      /* Desktop sidebar background */
  --bottom-bar-bg: #545054;   /* Mobile bottom bar background */
  --border-muted: #4b5563;    /* Gray-600 border */
  --mobile-bottom-bar-height: 72px;
}

.page-bg { background-color: var(--page-bg); }
.panel-bg { background-color: var(--panel-bg); }
.panel-bg-mobile { background-color: var(--panel-bg-mobile); }
.overlay-bg { background-color: var(--overlay-bg); }
.desktop-bg { background-color: var(--desktop-bg); }
.sidebar-bg { background-color: var(--sidebar-bg); }
.bottom-bar-bg { background-color: var(--bottom-bar-bg); }
.border-muted { border-color: var(--border-muted) !important; }

.mobile-bottom-nav { min-height: var(--mobile-bottom-bar-height); }

/* Mobile page dots: keep visible above bottom nav, including in iOS fullscreen */
.mobile-page-dots { position: fixed; left: 0; right: 0; bottom: var(--mobile-bottom-bar-height); z-index: 20; pointer-events: none; }
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .mobile-page-dots { bottom: calc(var(--mobile-bottom-bar-height) + env(safe-area-inset-bottom)); }
}

/* Inputs and form helpers */
.input-bg { background-color: var(--page-bg) !important; }
.input-border { border-color: var(--border-muted) !important; }

/* Common UI elements */
.circular-progress { transform: rotate(-90deg); }
.progress-bar { stroke-linecap: round; transition: stroke-dashoffset 0.5s ease-in-out; }
.mode-button { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
.mode-button:active { transform: scale(0.95); }
.slider-container { position: relative; }
.slider {
  -webkit-appearance: none;
  appearance: none;
  height: 6px;
  border-radius: 3px;
  outline: none;
  transition: all 0.3s;
}
.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: white;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: white;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Desktop layout helpers (apply broadly on md and up) */
@media (min-width: 768px) {
  .container-desktop { min-height: 100vh; height: 100%; background: var(--desktop-bg); }
  .sidebar { background: var(--sidebar-bg); padding: 20px; min-height: 100vh; position: fixed; top: 0; left: 0; width: 250px; z-index: 10; overflow-y: auto; }
  .main-content { padding: 40px; margin-left: 250px; background: var(--desktop-bg); min-height: 100vh; }
}

/* Force tailwind-like behavior for md: utilities regardless of pointer */
@media (min-width: 768px) {
  .md\:hidden { display: none !important; }
  .md\:block { display: block !important; }
}

/* Overlay z-index helper */
.overlay-high { z-index: 100; }

/* Modal surface */
.modal-surface { background-color: var(--panel-bg); }

/* Optional helpers for rounded panels matching templates */
.rounded-panel { border-radius: 0.75rem; }
.rounded-panel-lg { border-radius: 1.5rem; }

/* Mobile-first responsive helpers */
.container-mobile { padding: 10px; max-width: 100%; }

/* Ensure mobile layout is always used on touch devices */
@media (pointer: coarse) {
  .container-desktop { display: none !important; }
  .md\:hidden { display: block !important; }
  .hidden { display: none !important; }
  .md\:block { display: none !important; }
}

/* Weather widget gradient */
.weather-widget { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }

/* Animated submenu styles */
.submenu-container { overflow: hidden; transition: max-height 0.3s ease, opacity 0.3s ease, margin-top 0.3s ease; }
.submenu-container.collapsed { max-height: 0; opacity: 0; margin-top: 0; }
.submenu-container.expanded { max-height: 200px; opacity: 1; margin-top: 0.5rem; }
.settings-arrow { transition: transform 0.3s ease; }
.settings-arrow.rotated { transform: rotate(90deg); }

/* Mobile swipe styles */
.swipe-container { position: relative; }

/* Tabs and submenu states (settings page) */
.tab-content { display: none; }
.tab-content.active { display: block; }
.tab-button { transition: all 0.2s ease; }
.submenu-item { transition: all 0.2s ease; }
.submenu-item-active { background-color: #6b7280 !important; color: white !important; }
.submenu-item-inactive { color: #9ca3af; }
.submenu-item-inactive:hover { color: white; }

/* Mobile touch improvements */
button { pointer-events: auto !important; touch-action: manipulation !important; }

@media (max-width: 768px) {
  /* Make buttons more touch-friendly */
  button { min-height: 44px; min-width: 44px; padding: 8px 8px !important; font-size: 16px !important; }
  button.text-xs { padding: 8px 12px !important; font-size: 14px !important; min-height: 40px; }
  /* Header icon button alignment consistent with other pages */
  .header-icon-btn { padding: 0.5rem !important; min-height: auto !important; min-width: auto !important; font-size: inherit !important; }
  .header-icon-btn svg { width: 1rem !important; height: 1rem !important; }
  /* Inputs */
  input[type="text"], input[type="number"], input[type="time"], select { font-size: 16px !important; padding: 12px !important; }
  /* Slider thumbs larger on mobile */
  .slider::-webkit-slider-thumb { height: 24px; width: 24px; background: #f59e0b; box-shadow: 0 2px 6px rgba(0,0,0,0.3); }
  .slider::-moz-range-thumb { height: 24px; width: 24px; background: #f59e0b; box-shadow: 0 2px 6px rgba(0,0,0,0.3); }
  /* Active touch feedback helpers (for Tailwind utility-like classnames) */
  .active\:bg-gray-700:active { background-color: #374151 !important; }
  .active\:scale-95:active { transform: scale(0.95) !important; }
  .active\:scale-98:active { transform: scale(0.98) !important; }
}

/* Temperature reading card layout: title pinned top, value centered */
.temp-card-grid { display: grid; grid-template-rows: auto 1fr; min-height: 112px; }
.temp-card-grid .temp-label { align-self: start; justify-self: start; text-align: left; }
.temp-card-grid .temp-value { align-self: center; justify-self: center; text-align: center; }

/* Absolute-centered value with top-pinned label */
.temp-card { position: relative; min-height: 128px; }
.temp-card .temp-label { position: absolute; top: 1rem; left: 1rem; right: 1rem; text-align: left; }
.temp-card .temp-value { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; width: calc(100% - 2rem); }

/* Schedule card styling */
.schedule-card { transition: all 0.3s ease; border-left: 4px solid transparent; }
.schedule-card.active { border-left-color: #22c55e; }
.schedule-card.inactive { border-left-color: #ef4444; opacity: 0.7; }
.schedule-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }

.weekly-schedule-card {
  background: linear-gradient(160deg, rgba(30, 41, 59, 0.95) 0%, rgba(17, 24, 39, 0.95) 100%);
  border: 1px solid rgba(148, 163, 184, 0.25);
  box-shadow: 0 20px 45px rgba(15, 23, 42, 0.4);
}

.weekly-timeline {
  height: 3.25rem;
  background: rgba(17, 24, 39, 0.85);
  border-radius: 1rem;
  border: 1px solid rgba(148, 163, 184, 0.2);
  box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.55);
  padding: 0.25rem 0;
}

.weekly-timeline .border-l {
  border-color: rgba(148, 163, 184, 0.25) !important;
}

.weekly-timeline .bg-orange-500,
.weekly-timeline .bg-blue-500,
.weekly-timeline .bg-purple-500,
.weekly-timeline .bg-gray-500 {
  border-radius: 0.75rem;
}

.weekly-hour-label {
  top: -0.9rem;
  font-size: 0.65rem;
  letter-spacing: 0.04em;
}

.weekly-tooltip {
  top: -1.6rem;
  font-size: 0.7rem;
}

/* Block Schedule Timeline Styles */
.day-schedule { margin-bottom: 0; }

.legend-row { gap: 1.5rem 1rem; }
.legend-item { margin-right: 0; }

/* Consistent mobile overlay (status + user) */
.mobile-overlay { position: fixed; top: 1.25rem; right: 1rem; z-index: 9999; display: flex; align-items: center; }
@supports (padding: max(0px)) {
  .mobile-overlay { top: max(1.25rem, env(safe-area-inset-top)); right: max(1rem, env(safe-area-inset-right)); }
}

/* Header-scoped overlay, centered vertically */
.mobile-header { position: relative; }
.header-overlay { position: absolute; right: 1.25rem; top: 50%; transform: translateY(-50%); display: flex; align-items: center; z-index: 20; }
@supports (padding: max(0px)) {
  .header-overlay { right: max(1.25rem, env(safe-area-inset-right)); }
}

/* Data History: compact mobile pagination */
@media (max-width: 640px) {
  #mobile-pagination-controls { gap: 6px !important; flex-wrap: nowrap !important; }
  #mobile-pagination-controls select { padding: 2px 6px !important; font-size: 12px !important; min-height: 30px !important; }
  #mobile-pagination-controls button { padding: 6px 8px !important; font-size: 12px !important; min-height: 34px !important; }
  #mobile-pagination-controls #mobile-pagination-info { font-size: 12px !important; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
}

/* Skeleton loading states */
.skeleton { position: relative; overflow: hidden; background: #374151; border-radius: 0.5rem; }
.skeleton::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
  animation: skeleton-shimmer 1.2s infinite;
}
@keyframes skeleton-shimmer { 100% { transform: translateX(100%); } }
.skeleton-line { height: 14px; margin-bottom: 10px; }
.skeleton-line.sm { height: 10px; }
.skeleton-line.lg { height: 20px; }
.skeleton-circle { width: 64px; height: 64px; border-radius: 9999px; background: #374151; position: relative; overflow: hidden; }
.skeleton-circle::after { content: ""; position: absolute; inset: 0; transform: translateX(-100%); background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent); animation: skeleton-shimmer 1.2s infinite; }

/* Containers hidden when data is ready */
.hidden-on-ready { display: none; }
